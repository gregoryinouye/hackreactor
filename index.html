<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <script>

      $(document).ready(function(){
        var $body = $('body');
        $body.html('');


        // display tweets
        // does not continue to update, just counts at initialization
        var displayedTweetIndex = -1;

        var newestTweetIndex;

        var getTweets = function(startTweet, endTweet) {
          for (var i = startTweet + 1; i <= endTweet; i++) {
            var tweet = streams.home[i];
            var timeStamp = streams.home[i]['created_at'];
            var $tweet = $('<div></div>');
            $tweet.text('@' + tweet.user + ': ' + tweet.message + ' ' + timeStamp);
            $tweet.prependTo($body);
        }};

        var updateTweets = function() {
          newestTweetIndex = streams.home.length - 1;
          if (newestTweetIndex !== displayedTweetIndex) {
            // update tweets
            getTweets(displayedTweetIndex, newestTweetIndex);
            displayedTweetIndex = newestTweetIndex;
          }
        }

        updateTweets();

        setInterval(updateTweets, 1500);

      });

    </script>
  </body>
</html>
